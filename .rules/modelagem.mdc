Modelagem de Dados â€” Virtual Staging SaaS
ğŸ“Œ profiles

ExtensÃ£o do usuÃ¡rio (BetterAuth jÃ¡ cria users).

profiles
---------
id (pk, uuid)
user_id (fk â†’ users.id, unique)
name (string)
role (enum: "user", "admin")
credits (int) â†’ saldo de fotos
created_at (timestamp)
updated_at (timestamp)

ğŸ“Œ jobs

Cada requisiÃ§Ã£o de staging.

jobs
---------
id (pk, uuid)
user_id (fk â†’ users.id)
room_type_id (fk â†’ room_types.id)
furniture_style_id (fk â†’ furniture_styles.id)
lora_id (fk â†’ loras.id, nullable)
prompt (text)
input_image_url (string) â†’ S3 original
output_image_url (string, nullable) â†’ S3 final
status (enum: "pending", "processing", "completed", "failed")
error_message (text, nullable)
model (string, default: "flux-pro")
credits_used (int)
is_premium_room_type (boolean, default: false)
is_premium_furniture_style (boolean, default: false)
created_at (timestamp)
updated_at (timestamp)

ğŸ“Œ room_types

Tipos de cÃ´modos (alguns premium).

room_types
---------
id (pk, uuid)
name (string) â†’ slug (ex: "living_room")
label (string) â†’ ex: "Sala de Estar"
premium_only (boolean, default: false)
created_at (timestamp)
updated_at (timestamp)


Exemplos iniciais:

living_room (false)

bedroom (false)

kitchen (true)

bathroom (true)

office (true)

ğŸ“Œ furniture_styles

Estilos de mobÃ­lia (alguns premium).

furniture_styles
---------
id (pk, uuid)
name (string) â†’ slug (ex: "scandinavian")
label (string) â†’ ex: "Escandinavo"
premium_only (boolean, default: false)
created_at (timestamp)
updated_at (timestamp)


Exemplos iniciais:

modern (false)

scandinavian (false)

japanese_minimalist (true)

industrial (true)

luxury (true)

ğŸ“Œ loras

Adapters de estilos.

loras
---------
id (pk, uuid)
room_type_id (fk â†’ room_types.id)
furniture_style_id (fk â†’ furniture_styles.id)
name (string) â†’ "lora_bedroom_scandinavian_v1"
file_url (string) â†’ caminho no S3
active (boolean, default: true)
created_at (timestamp)
updated_at (timestamp)


ğŸ“Œ plans

Planos de assinatura.

plans
---------
id (pk, uuid)
name (string) â†’ "Basic", "Standard", "Professional", "Enterprise"
price_monthly (int) â†’ em centavos
price_yearly (int) â†’ em centavos
photos_per_month (int)
is_popular (boolean, default: false)
created_at (timestamp)
updated_at (timestamp)

ğŸ“Œ plan_features

Recursos disponÃ­veis no sistema.

plan_features
---------
id (pk, uuid)
name (string) â†’ slug (ex: "unlimited_downloads")
label (string) â†’ ex: "Unlimited renders and downloads"
description (text, nullable)
created_at (timestamp)
updated_at (timestamp)


Exemplos:

unlimited_downloads

all_room_types

furniture_removal

no_watermark

free_editing_trial

fast_turnaround

multi_view_staging

image_storage_forever

success_manager

api_access

enterprise_support

ğŸ“Œ plan_feature_relations

Relaciona planos com features.

plan_feature_relations
---------
id (pk, uuid)
plan_id (fk â†’ plans.id)
feature_id (fk â†’ plan_features.id)
created_at (timestamp)

ğŸ“Œ subscriptions

Assinaturas ativas dos usuÃ¡rios.

subscriptions
---------
id (pk, uuid)
user_id (fk â†’ users.id)
plan_id (fk â†’ plans.id)
stripe_subscription_id (string)
status (enum: "active", "canceled", "past_due")
current_period_start (timestamp)
current_period_end (timestamp)
renewal_at (timestamp)
created_at (timestamp)
updated_at (timestamp)

ğŸ“Œ payments

HistÃ³rico de pagamentos via Stripe.

payments
---------
id (pk, uuid)
user_id (fk â†’ users.id)
stripe_payment_intent_id (string)
amount (int) â†’ em centavos
currency (string, default: "usd")
status (enum: "pending", "succeeded", "failed")
created_at (timestamp)
updated_at (timestamp)

ğŸ“Œ audit_logs

Auditoria para rastrear aÃ§Ãµes.

audit_logs
---------
id (pk, uuid)
user_id (fk â†’ users.id)
action (string) â†’ ex: "create_job", "update_subscription"
metadata (jsonb)
created_at (timestamp)
